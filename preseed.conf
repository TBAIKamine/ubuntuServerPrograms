# Preseed Configuration for Unattended First-Time Installation
# ============================================================
# This file allows you to pre-configure all installation prompts
# for a complete unattended install of the postboot setup.
#
# IMPORTANT:
# - This preseed is ONLY for first-time installation
# - Reinstall prompts are NOT supported (will still be interactive)
# - Leave values empty or commented out to skip that configuration
# - Some prompts are automatically derived from other values (see notes)
#
# Usage:
# 1. Fill in the values below
# 2. Place this file in the parent directory of postboot/
# 3. Run postboot/setup.sh - it will detect and use this file

# ============================================================
# UNATTENDED MODE
# ============================================================
# Set to "true" to skip ALL interactive prompts and use preseed values
# When true: init.sh runs automatically, menu is skipped, all selections come from preseed
PRESEED_UNATTENDED="true"

# ============================================================
# INIT.SH - SECURITY INITIALIZATION
# ============================================================
# Run init.sh automatically? (y/n)
# Only applies on first boot when /etc/cryptsetup-keys.d exists
PRESEED_RUN_INIT="y"

# These settings are used by init.sh for initial security setup

# LUKS disk encryption passphrase
# This will replace the auto-generated passphrase with your own
# Leave empty to be prompted during init.sh
PRESEED_LUKS_PASSPHRASE=""

# GRUB bootloader password
# Protects GRUB menu from unauthorized modifications
# Leave empty to be prompted during init.sh
PRESEED_GRUB_PASSWORD=""

# ============================================================
# TOOL SELECTION (replaces interactive menu)
# ============================================================
# Set each to "1" to install, "0" or empty to skip
PRESEED_OPT_passwordless_sudoer="1"
PRESEED_OPT_fail2ban_vpn_bypass="1"
PRESEED_OPT_sharkvpn="1"
PRESEED_OPT_webserver="1"
PRESEED_OPT_apache_domains="1"
PRESEED_OPT_certbot="1"
PRESEED_OPT_phpmyadmin="1"
PRESEED_OPT_roundcube="1"
PRESEED_OPT_wp_cli="1"
PRESEED_OPT_pyenv_python="1"
PRESEED_OPT_podman="1"
PRESEED_OPT_lazydocker="1"
PRESEED_OPT_portainer="1"
PRESEED_OPT_gitea="1"
PRESEED_OPT_gitea_runner="0"
PRESEED_OPT_docker_mailserver="1"
PRESEED_OPT_n8n="1"
PRESEED_OPT_selenium="0"
PRESEED_OPT_homeassistant="0"
PRESEED_OPT_grafana_otel="0"

# ============================================================
# PASSWORDLESS SUDOER
# ============================================================
# Secret phrase for passwordless sudo protection
# Leave empty to skip passwordless sudoer setup
PRESEED_SUDO_SECRET=""

# ============================================================
# FAIL2BAN VPN BYPASS (required when installing fail2ban_vpn_bypass)
# ============================================================
# Network values used for policy-based routing to bypass VPN for incoming traffic.
# Leave empty to be prompted during interactive install.
# In unattended mode, these MUST be provided if PRESEED_OPT_fail2ban_vpn_bypass=1.
PRESEED_YOUR_INTERFACE=""
PRESEED_YOUR_LAN_SUBNET=""
PRESEED_YOUR_DEFAULT_GATEWAY=""
PRESEED_YOUR_PUBLIC_IP=""

# ============================================================
# MAIN FQDN (DOMAIN)
# ============================================================
# Primary fully qualified domain name for the server
# Used by: Apache domains, Portainer, Gitea, n8n, etc.
# Example: example.com or myserver.example.com
PRESEED_FQDN=""

# ============================================================
# CERTBOT / SSL CERTIFICATES
# ============================================================
# Email for Let's Encrypt certbot registration
# Required when installing certbot
PRESEED_CERTBOT_EMAIL=""

# ============================================================
# NAMECHEAP DNS PROVIDER (optional)
# ============================================================
# Namecheap API credentials for automatic DNS management
# Leave both empty to skip Namecheap integration
PRESEED_NC_USERNAME=""
PRESEED_NC_API_KEY=""

# Whether to initialize DNS records for all Namecheap domains
# Values: Y, y, N, n (default: Y if Namecheap credentials provided)
PRESEED_SETUP_DNS="Y"

# Domain selection for DNS initialization
# Values: "all" or comma/range selection like "1,3-5"
PRESEED_DNS_SELECTION="all"

# ============================================================
# PHPMYADMIN
# ============================================================
# Database user password for phpMyAdmin
# Leave empty to skip phpMyAdmin password configuration
PRESEED_PHPMYADMIN_SECRET=""

# ============================================================
# DOCKER MAILSERVER (DMS)
# ============================================================
# Create a dedicated system user "dms" to run the DMS container?
# Set to "1" for yes (recommended for better security and isolation)
# Set to "0" to run as the regular sudo user instead
PRESEED_DMS_SYS_USER="1"

# How to configure Docker Mailserver:
#   1 = Use hostname (FQDN)
#   2 = Use email address
#   c = Cancel/skip DMS setup
#
# NOTE: If PRESEED_DMS_EMAIL is set, choice "2" is assumed
#       If PRESEED_DMS_HOSTNAME is set, choice "1" is assumed
#       If both are set, email (2) takes precedence
#       If neither is set, DMS setup will be skipped
PRESEED_DMS_CHOICE=""

# Docker Mailserver hostname (only used if DMS_CHOICE=1)
# If empty and DMS_CHOICE=1, will use PRESEED_FQDN if available
PRESEED_DMS_HOSTNAME=""

# Docker Mailserver email (only used if DMS_CHOICE=2)
# If empty and DMS_CHOICE=2, will use PRESEED_CERTBOT_EMAIL if available
PRESEED_DMS_EMAIL=""
